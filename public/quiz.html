<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CateQuiz | Quiz</title>
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="icon" href="./assets/icon/catequiz-icon.png" />
    <script src="./js/sessao.js"></script>
</head>

<body>
    <div class="header">
        <div class="container">
            <h1 class="titulo">CateQuiz</h1>
            <ul class="navbar">
                <li><a href="index.html">Inicial</a></li>
                <li><a href="cont_informativo.html">Conteúdo<br>Informativo</a></li>
                <li class="agora"><a href="#">Quiz</a></li>
                <li>|</li>
                <li><a href="login.html">Login</a></li>
                <li><a href="cadastro.html">Cadastro</a></li>
            </ul>
        </div>
    </div>

    <div class="text">
        <form id="formQuiz">
            <h2>Responda ao quiz!</h2>

            <div class="quiz-container">
                <div class="pergunta" data-id="1" data-pagina="1">
                    <p>1. Qual é considerada por muitos estudiosos como a primeira denominação cristã?</p>
                    <label><input type="radio" name="q1" value="A" required> A) Protestantismo</label><br />
                    <label><input type="radio" name="q1" value="B"> B) Ortodoxia</label><br />
                    <label><input type="radio" name="q1" value="C"> C) Anglicanismo</label><br />
                    <label><input type="radio" name="q1" value="D"> D) Catolicismo</label><br />
                    <label><input type="radio" name="q1" value="E"> E) Pentecostalismo</label>
                </div>

                <div class="pergunta" data-id="2" data-pagina="1">
                    <p>2. Qual é o nome dado ao conjunto de cinco livros escritos por Moisés, considerados sagrados no
                        judaísmo?</p>
                    <label><input type="radio" name="q2" value="A" required> A) Torá</label><br />
                    <label><input type="radio" name="q2" value="B"> B) Talmude</label><br />
                    <label><input type="radio" name="q2" value="C"> C) Pentecostes</label><br />
                    <label><input type="radio" name="q2" value="D"> D) Apócrifos</label><br />
                    <label><input type="radio" name="q2" value="E"> E) Evangelhos</label>
                </div>

                <div class="pergunta" data-id="3" data-pagina="1">
                    <p>3. Segundo os cristãos, quantas profecias cumpriu Jesus (também chamado de Yeshua)?</p>
                    <label><input type="radio" name="q3" value="A" required> A) 12</label><br />
                    <label><input type="radio" name="q3" value="B"> B) 53</label><br />
                    <label><input type="radio" name="q3" value="C"> C) 100</label><br />
                    <label><input type="radio" name="q3" value="D"> D) Mais de 330</label><br />
                    <label><input type="radio" name="q3" value="E"> E) 613</label>
                </div>

                <div class="pergunta" data-id="4" data-pagina="1">
                    <p>4. O que significa a palavra "católico"?</p>
                    <label><input type="radio" name="q4" value="A" required> A) Antigo</label><br />
                    <label><input type="radio" name="q4" value="B"> B) Autêntico</label><br />
                    <label><input type="radio" name="q4" value="C"> C) Universal</label><br />
                    <label><input type="radio" name="q4" value="D"> D) Apostólico</label><br />
                    <label><input type="radio" name="q4" value="E"> E) Divino</label>
                </div>

                <div class="pergunta" data-id="5" data-pagina="1">
                    <p>5. Qual foi uma das principais contribuições da Igreja Católica para a sociedade ocidental?</p>
                    <label><input type="radio" name="q5" value="A" required> A) A fundação de escolas
                        públicas</label><br />
                    <label><input type="radio" name="q5" value="B"> B) A criação de sistemas de irrigação</label><br />
                    <label><input type="radio" name="q5" value="C"> C) A fundação das primeiras
                        universidades</label><br />
                    <label><input type="radio" name="q5" value="D"> D) A invenção da imprensa</label><br />
                    <label><input type="radio" name="q5" value="E"> E) A construção de cidades fortificadas</label>
                </div>

                <div class="pergunta" data-id="6" data-pagina="2">
                    <p>6. Qual foi a causa da morte de Jesus?</p>
                    <label><input type="radio" name="q6" value="A" required> A) Apedrejamento</label><br />
                    <label><input type="radio" name="q6" value="B"> B) Envenenamento</label><br />
                    <label><input type="radio" name="q6" value="C"> C) Crucificação</label><br />
                    <label><input type="radio" name="q6" value="D"> D) Decapitação</label><br />
                    <label><input type="radio" name="q6" value="E"> E) Suicídio</label>
                </div>

                <div class="pergunta" data-id="7" data-pagina="2">
                    <p>7. Qual foi o apóstolo considerado o primeiro Papa da Igreja Católica?</p>
                    <label><input type="radio" name="q7" value="A" required> A) João</label><br />
                    <label><input type="radio" name="q7" value="B"> B) Paulo</label><br />
                    <label><input type="radio" name="q7" value="C"> C) Tiago</label><br />
                    <label><input type="radio" name="q7" value="D"> D) Pedro</label><br />
                    <label><input type="radio" name="q7" value="E"> E) André</label>
                </div>

                <div class="pergunta" data-id="8" data-pagina="2">
                    <p>8. Qual era a língua mais utilizada no mundo mediterrâneo durante a expansão inicial do
                        cristianismo?</p>
                    <label><input type="radio" name="q8" value="A" required> A) Hebraico</label><br />
                    <label><input type="radio" name="q8" value="B"> B) Latim</label><br />
                    <label><input type="radio" name="q8" value="C"> C) Árabe</label><br />
                    <label><input type="radio" name="q8" value="D"> D) Aramaico</label><br />
                    <label><input type="radio" name="q8" value="E"> E) Grego</label>
                </div>

                <div class="pergunta" data-id="9" data-pagina="2">
                    <p>9. Qual imperador romano legalizou o cristianismo através do Édito de Milão?</p>
                    <label><input type="radio" name="q9" value="A" required> A) Nero</label><br />
                    <label><input type="radio" name="q9" value="B"> B) Augusto</label><br />
                    <label><input type="radio" name="q9" value="C"> C) Constantino</label><br />
                    <label><input type="radio" name="q9" value="D"> D) Teodósio</label><br />
                    <label><input type="radio" name="q9" value="E"> E) Trajano</label>
                </div>

                <div class="pergunta" data-id="10" data-pagina="2">
                    <p>10. Qual foi a principal causa do Grande Cisma de 1054?</p>
                    <label><input type="radio" name="q10" value="A" required> A) Disputas teológicas e
                        políticas</label><br />
                    <label><input type="radio" name="q10" value="B"> B) A Reforma Protestante</label><br />
                    <label><input type="radio" name="q10" value="C"> C) A conversão de Constantino</label><br />
                    <label><input type="radio" name="q10" value="D"> D) A criação do Édito de Milão</label><br />
                    <label><input type="radio" name="q10" value="E"> E) A morte de Pedro em Roma</label>
                </div>

                <div class="pergunta" data-id="11" data-pagina="3">
                    <p>11. O que define o mistério da Santíssima Trindade no Cristianismo?</p>
                    <label><input type="radio" name="q11" value="A" required> A) Deus como três seres
                        distintos</label><br />
                    <label><input type="radio" name="q11" value="B"> B) Deus como um único ser em três
                        pessoas</label><br />
                    <label><input type="radio" name="q11" value="C"> C) Deus como uma força impessoal</label><br />
                    <label><input type="radio" name="q11" value="D"> D) Deus como apenas Pai e Filho</label><br />
                    <label><input type="radio" name="q11" value="E"> E) Deus como uma entidade única sem
                        distinções</label>
                </div>

                <div class="pergunta" data-id="12" data-pagina="3">
                    <p>12. Quais são os três pilares fundamentais da fé católica?</p>
                    <label><input type="radio" name="q12" value="A" required> A) Tradição Apostólica, Sagradas
                        Escrituras e Magistério da Igreja</label><br />
                    <label><input type="radio" name="q12" value="B"> B) Tradição Apostólica, Concílios Ecumênicos e
                        Santos</label><br />
                    <label><input type="radio" name="q12" value="C"> C) Sagradas Escrituras, Sacramentos e
                        Santos</label><br />
                    <label><input type="radio" name="q12" value="D"> D) Magistério da Igreja, Sacramentos e Concílios
                        Ecumênicos</label><br />
                    <label><input type="radio" name="q12" value="E"> E) Tradição Apostólica, Santos e Eucaristia</label>
                </div>

                <div class="pergunta" data-id="13" data-pagina="3">
                    <p>13. Qual é o significado de 'Latria' na teologia católica?</p>
                    <label><input type="radio" name="q13" value="A" required> A) Honra especial dedicada à Virgem
                        Maria</label><br />
                    <label><input type="radio" name="q13" value="B"> B) Veneração dedicada aos santos e
                        anjos</label><br />
                    <label><input type="radio" name="q13" value="C"> C) Adoração reservada exclusivamente a
                        Deus</label><br />
                    <label><input type="radio" name="q13" value="D"> D) Honra especial a São José</label><br />
                    <label><input type="radio" name="q13" value="E"> E) Veneração dedicada aos mártires</label>
                </div>

                <div class="pergunta" data-id="14" data-pagina="3">
                    <p>14. Quais são os sete sacramentos reconhecidos pela Igreja Católica?</p>
                    <label><input type="radio" name="q14" value="A" required> A) Batismo, Confirmação, Eucaristia,
                        Reconciliação, Hiperdulia, Dulia, Latria</label><br />
                    <label><input type="radio" name="q14" value="B"> B) Eucaristia, Batismo, Ordem, Matrimônio, Santo
                        Agostinho, São Tomás de Aquino, Santo Antônio</label><br />
                    <label><input type="radio" name="q14" value="C"> C) Batismo, Confirmação, Eucaristia, Reconciliação,
                        Unção dos Enfermos, Ordem, Matrimônio</label><br />
                    <label><input type="radio" name="q14" value="D"> D) Eucaristia, Batismo, Ordem, Hiperdulia, Santo
                        Agostinho, São José, Dulia</label><br />
                    <label><input type="radio" name="q14" value="E"> E) Batismo, Reconciliação, Ordem, Matrimônio,
                        Dulia, Hiperdulia, São Pedro</label>
                </div>

                <div class="pergunta" data-id="15" data-pagina="3">
                    <p>15. Qual é um dos motivos de Maria ser chamada de Nova Arca da Aliança?</p>
                    <label><input type="radio" name="q15" value="A" required> A) Porque carregou as tábuas da
                        Lei</label><br />
                    <label><input type="radio" name="q15" value="B"> B) Porque carregou o próprio Deus encarnado em seu
                        ventre</label><br />
                    <label><input type="radio" name="q15" value="C"> C) Porque foi escolhida como sumo
                        sacerdote</label><br />
                    <label><input type="radio" name="q15" value="D"> D) Porque simboliza o maná do deserto</label><br />
                    <label><input type="radio" name="q15" value="E"> E) Porque liderou o povo de Israel no
                        deserto</label>
                </div>

                <div class="pergunta" data-id="16" data-pagina="4">
                    <p>16. Onde está localizada a cidade de Lourdes?</p>
                    <label><input type="radio" name="q16" value="A" required> A) Norte da Itália</label><br />
                    <label><input type="radio" name="q16" value="B"> B) Sudoeste da Alemanha</label><br />
                    <label><input type="radio" name="q16" value="C"> C) Sul da França</label><br />
                    <label><input type="radio" name="q16" value="D"> D) Centro de Portugal</label><br />
                    <label><input type="radio" name="q16" value="E"> E) Oeste da Espanha</label>
                </div>

                <div class="pergunta" data-id="17" data-pagina="4">
                    <p>17. Qual foi o nome da jovem que presenciou as aparições de Nossa Senhora em Lourdes?</p>
                    <label><input type="radio" name="q17" value="A" required> A) Teresa de Ávila</label><br />
                    <label><input type="radio" name="q17" value="B"> B) Bernadette Soubirous</label><br />
                    <label><input type="radio" name="q17" value="C"> C) Clara de Assis</label><br />
                    <label><input type="radio" name="q17" value="D"> D) Catarina Labouré</label><br />
                    <label><input type="radio" name="q17" value="E"> E) Joana d’Arc</label>
                </div>

                <div class="pergunta" data-id="18" data-pagina="4">
                    <p>18. Como Nossa Senhora se identificou durante as aparições em Lourdes?</p>
                    <label><input type="radio" name="q18" value="A" required> A) Nossa Senhora da Paz</label><br />
                    <label><input type="radio" name="q18" value="B"> B) A Virgem Dolorosa</label><br />
                    <label><input type="radio" name="q18" value="C"> C) A Rainha do Céu</label><br />
                    <label><input type="radio" name="q18" value="D"> D) A Imaculada Conceição</label><br />
                    <label><input type="radio" name="q18" value="E"> E) A Senhora das Graças</label>
                </div>

                <div class="pergunta" data-id="19" data-pagina="4">
                    <p>19. O que surgiu após Bernadette cavar o chão da Gruta de Massabielle?</p>
                    <label><input type="radio" name="q19" value="A" required> A) Uma imagem da Virgem</label><br />
                    <label><input type="radio" name="q19" value="B"> B) Uma árvore com frutos</label><br />
                    <label><input type="radio" name="q19" value="C"> C) Um altar de pedra</label><br />
                    <label><input type="radio" name="q19" value="D"> D) Um relicário antigo</label><br />
                    <label><input type="radio" name="q19" value="E"> E) Uma fonte de água milagrosa</label>
                </div>

                <div class="pergunta" data-id="20" data-pagina="4">
                    <p>20. O que inspirou a textura crocante do Ferrero Rocher?</p>
                    <label><input type="radio" name="q20" value="A" required> A) A formação rochosa da
                        gruta</label><br />
                    <label><input type="radio" name="q20" value="B"> B) Os seixos do rio Gave</label><br />
                    <label><input type="radio" name="q20" value="C"> C) As velas dos peregrinos</label><br />
                    <label><input type="radio" name="q20" value="D"> D) A aparência do altar da gruta</label><br />
                    <label><input type="radio" name="q20" value="E"> E) As folhas secas da região</label>
                </div>

                <button type="submit">Enviar Respostas</button>
            </div>
        </form>
    </div>

    <div class="footer">
        <div class="container">
            <h4>Feito com amor por aluno &hearts; Aaaaaa &copy; 2025</h4>
            <span class="version">v1.0.0</span>
        </div>
    </div>

    <script>
        if (!sessionStorage.ID_USUARIO) {
            alert("Você precisa estar logado para acessar o quiz.");
            window.location.href = "login.html";
        }

        const form = document.getElementById('formQuiz');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            // Pega o usuário logado do sessionStorage
            const idUsuario = Number(sessionStorage.ID_USUARIO);
            if (!idUsuario) {
                alert('Usuário não autenticado. Faça login para continuar.');
                window.location.href = 'login.html';
                return;
            }

            const respostas = [];
            const perguntas = document.querySelectorAll('.pergunta');

            for (const pergunta of perguntas) {
                const idPergunta = Number(pergunta.dataset.id);
                const nomeInput = `q${idPergunta}`;
                const inputSelecionado = form.elements[nomeInput];

                if (!inputSelecionado) {
                    alert(`Pergunta ${idPergunta} não encontrada no formulário.`);
                    return;
                }

                const respostaSelecionada = inputSelecionado.value;

                if (!respostaSelecionada) {
                    alert(`Você precisa responder a pergunta ${idPergunta}.`);
                    return;
                }

                // Monta o objeto resposta para enviar ao backend
                respostas.push({
                    fkpergunta: idPergunta,
                    letraResposta: respostaSelecionada // por enquanto só a letra, o backend vai tratar
                });
            }

            const dadosEnvio = {
                fkusuario: idUsuario,
                respostas: respostas
            };


            try {
                const response = await fetch('/usuario_resposta/salvar', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(dadosEnvio)
                });

                if (response.ok) {
                    alert('Respostas enviadas com sucesso!');
                    window.location.href = './dashboard/dashboard.html'; // redireciona para a dashboard
                } else {
                    const erroTexto = await response.text();
                    alert('Erro ao enviar respostas: ' + erroTexto);
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro de conexão com o servidor.');
            }
        });
    </script>

</body>

</html>